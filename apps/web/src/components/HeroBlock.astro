---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

export enum ImagePosition {
    Left = "left",
    Right = "right"
}

interface Props {
    height?: string;
    image?: ImageMetadata;
    imageAltText?: string;
    imagePosition?: ImagePosition;
    imageResizePosition?: string;
}

const {
    height = "h-full",
    image,
    imageAltText,
    imagePosition = ImagePosition.Left,
    imageResizePosition = "object-top",
} = Astro.props;

const imagePlacement = imagePosition === "left" ? "lg:flex-row" : "lg:flex-row-reverse";
const componentClass = `w-full flex flex-col ${imagePlacement} lg:items-center lg:items-stretch shadow-sm mb-2`;
const imageClass = `w-full object-cover ${imageResizePosition} ${height}`;
---

<div class={componentClass}>
    <div class="w-full flex-shrink lg:w-2/3">
        {image && <Image src={image} alt={imageAltText} width="1960" class={imageClass} />}
    </div>
    <div class="w-full flex-1 lg:w-1/3">
        <slot />
    </div>
</div>
